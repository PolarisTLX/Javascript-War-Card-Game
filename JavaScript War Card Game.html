
<!DOCTYPE html>
<html>
<head>
<title>War Card Game</title>
</head>

<!-- If we type "console.dir(document)" into the browser console,
this shows you the DOM, where you can see
all the accessible items that we can intereact with,
such as with event listeners.
You can also find listed all the HTML elements
that you have specifically created in your html document -->

<body>
  <div id="wrapper">
    <div id="start"></div>
    <div id-"message"></div>
    <div id="board">
      <div id="player1" class="players">
        <div class="score"></div>
        <div class="hand"></div>
      </div>
      <div id="player2" class="players">
        <div class="score"></div>
        <div class="hand"></div>
      </div>
      <div id="action">
        <button id="btnBattle" type="button" class="btn">Fight</button>
      </div>
    </div>
  </div>

    <script>
      var suits = ["spades", "hearts", "clubs", "diams"];
      var cardFace = ["2","3","4","5","6","7","8","9","10","J","Q","K","A"];
      var cards = [];
      var players = [[],[]];
      //this is to check if this is the first time we are running so that the game can start
      //so we can complete the building o f the deck
      //it will only be reset once game is reset
      var firstRun = true;
      var fightButton = document.querySelector("#btnBattle");
      //If you then type "fightButton into the console"
      //you can see that this element:
      //<button id="btnBattle" type="button" class="btn">Fight</button>
      //has been captured

      //event listeners
      fightButton.addEventListener('click', battle);


      //functions
      function battle() {
        //if first run is true, game is brand new and needs more steps
        if(firstRun){
          //once the button is clicked the first time, reset FirstRun to false
          //so it can only be clicked once
          //it will only be reset once game is reset
          firstRun = false;
          //build full deck of 52 cards
          buildCards();
          //shuffle the deck of cards
          //NOTE ERROR WAS HERE BECAUSE "cards" was not included!
          shuffleArray(cards);
        }
        console.log('check that this works!');
      }

      //at start of game build a full deck of 52 cards:
      function buildCards(){
        //reset the cards deck to an empty array again
        cards = [];
        for(s in suits){
          //console.log(s);  //this shows that there are properly 4 suits
          //console.log(suits[s]);  //this lists each suit by name
          //suits[s][0] is the first letter of each suit
          var suitNew = suits[s][0].toUpperCase()  //makes the first letter uppercase
          //console.log(suitNew); //this prints first letters of each suit in uppercase
          for(n in cardFace){
            //build empty card object
            var card = {
              suit:suits[s],
              icon: suitNew,
              //icon is just the uppercase first letter of each suit above. Redundant?
              num:cardFace[n],
              cardValue:parseInt(n) + 2
              //num and cardValue are the same,
              //but num is the string value of the card value
              //and cardValue is the integer version of the card value
            }
            //loop through each suit and each card number, then push that card in the card object
            cards.push(card);
          }
        }
        //console.log(cards);  //show the deck of 52 cards
      }

      //NOTE THIS CAN BE USED TO SHUFFLE ANY ARRAY!!!
      //shuffle the deck of 52 cards
      function shuffleArray(array){
        for(var x = array.length -1; x > 0; x--){
          //to get a number from 1 to 10:
          //Math.floor(Math.random()*10);     gives 0-9
          //Math.floor(Math.random()*10) +1;  gives 1-10
          //NOTE:  Math.ceil()  rounds up.  Math.floor()  rounds down
          var ii = Math.floor(Math.random()*(x+1));  //x+1 so we don't start with 0 value
          //create temp container for array item:
          var temp = array[x];
          //console.log(temp);  this will create duplicates, so need to overwrite it:
          array[x] = array[ii];
          //console.log(array[ii]);
          array[ii] = temp;

        }
        //console.log(array);  //see that the 52 cards are shuffled
        return array;
      }

    </script>
</body>
</html>
